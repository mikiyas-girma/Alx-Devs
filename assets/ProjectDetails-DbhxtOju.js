import{c as ie,r as l,j as e,g as p,x as ce,a5 as b,k as de,O as pe,z as S,a6 as me,C as xe,F as ue,a7 as fe,T as ge,D as he,h as O,i as je,R as ve,a8 as E,$ as Ne,X as Ae,B as T,m as ye,u as De,a as u,o as D,p as we,L as w,a9 as Ce,aa as Re,ab as Pe,ac as C}from"./index-pX3ld21N.js";import{C as R}from"./card-IYNcxSm-.js";import{S as P}from"./separator-BVR3E7pj.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),_e="w-16 h-16 border-4 border-t-4 border-gray-200 border-t-gray-600 rounded-full animate-spin",A=l.forwardRef((a,s)=>{const{className:t,...o}=a;return e.jsx("div",{ref:s,className:p(_e,t),...o})});A.displayName="LoadingSpinner";var k="AlertDialog",[be,We]=ce(k,[b]),m=b(),$=a=>{const{__scopeAlertDialog:s,...t}=a,o=m(s);return e.jsx(ve,{...o,...t,modal:!0})};$.displayName=k;var Se="AlertDialogTrigger",I=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,n=m(t);return e.jsx(de,{...n,...o,ref:s})});I.displayName=Se;var Oe="AlertDialogPortal",M=a=>{const{__scopeAlertDialog:s,...t}=a,o=m(s);return e.jsx(je,{...o,...t})};M.displayName=Oe;var Ee="AlertDialogOverlay",F=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,n=m(t);return e.jsx(pe,{...n,...o,ref:s})});F.displayName=Ee;var j="AlertDialogContent",[Te,ke]=be(j),L=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,children:o,...n}=a,i=m(t),x=l.useRef(null),f=S(s,x),d=l.useRef(null);return e.jsx(me,{contentName:j,titleName:z,docsSlug:"alert-dialog",children:e.jsx(Te,{scope:t,cancelRef:d,children:e.jsxs(xe,{role:"alertdialog",...i,...n,ref:f,onOpenAutoFocus:ue(n.onOpenAutoFocus,c=>{var g;c.preventDefault(),(g=d.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(fe,{children:o}),e.jsx(Ie,{contentRef:x})]})})})});L.displayName=j;var z="AlertDialogTitle",q=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,n=m(t);return e.jsx(ge,{...n,...o,ref:s})});q.displayName=z;var V="AlertDialogDescription",B=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,n=m(t);return e.jsx(he,{...n,...o,ref:s})});B.displayName=V;var $e="AlertDialogAction",G=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,n=m(t);return e.jsx(O,{...n,...o,ref:s})});G.displayName=$e;var H="AlertDialogCancel",W=l.forwardRef((a,s)=>{const{__scopeAlertDialog:t,...o}=a,{cancelRef:n}=ke(H,t),i=m(t),x=S(s,n);return e.jsx(O,{...i,...o,ref:x})});W.displayName=H;var Ie=({contentRef:a})=>{const s=`\`${j}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${j}\` by passing a \`${V}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${j}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var o;document.getElementById((o=a.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},Me=$,Fe=I,Le=M,Y=F,U=L,X=G,J=W,K=q,Q=B;const ze=Me,qe=Fe,Ve=Le,Z=l.forwardRef(({className:a,...s},t)=>e.jsx(Y,{className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t}));Z.displayName=Y.displayName;const ee=l.forwardRef(({className:a,...s},t)=>e.jsxs(Ve,{children:[e.jsx(Z,{}),e.jsx(U,{ref:t,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));ee.displayName=U.displayName;const se=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",a),...s});se.displayName="AlertDialogHeader";const ae=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});ae.displayName="AlertDialogFooter";const te=l.forwardRef(({className:a,...s},t)=>e.jsx(K,{ref:t,className:p("text-lg font-semibold",a),...s}));te.displayName=K.displayName;const re=l.forwardRef(({className:a,...s},t)=>e.jsx(Q,{ref:t,className:p("text-sm text-muted-foreground",a),...s}));re.displayName=Q.displayName;const oe=l.forwardRef(({className:a,...s},t)=>e.jsx(X,{ref:t,className:p(E(),a),...s}));oe.displayName=X.displayName;const le=l.forwardRef(({className:a,...s},t)=>e.jsx(J,{ref:t,className:p(E({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));le.displayName=J.displayName;const v=({iconType:a,message:s,value:t,onConfirm:o})=>{const[n,i]=l.useState(!1),[x,f]=l.useState(null),d=N=>{f(N),i(!0)},c=()=>{o(x),i(!1)},g=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[a==="check"?e.jsx(Ne,{size:24,className:"cursor-pointer mx-2 text-green-500 hover:text-green-700",onClick:()=>d(t)}):a==="x"?e.jsx(Ae,{size:24,className:"cursor-pointer mx-2 text-red-500 hover:text-red-700",onClick:()=>d(t)}):a==="button"?e.jsx(T,{variant:"destructive",onClick:()=>d(t),children:"Close Project"}):null,e.jsxs(ze,{open:n,onOpenChange:i,children:[e.jsx(qe,{}),e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(te,{children:"Confirmation"})}),e.jsx(re,{children:s}),e.jsxs(ae,{children:[e.jsx(le,{onClick:g,children:"Cancel"}),e.jsx(oe,{onClick:c,children:"Confirm"})]})]})]})]})},Ye=()=>{const{id:a}=ye(),s=De();u(r=>r.user.loggeduser);const t=u(r=>r.projects.currentProject),o=u(r=>r.team.team),n=u(r=>r.team.team_status);u(r=>r.team.team_error),u(r=>r.projects.creator);const i=u(r=>r.projects.status),x=u(r=>r.projects.error),f=o.some(r=>r.status=="pending"&&r.role!=="Owner"),d=o.some(r=>r.status=="approved"&&r.role!=="Owner");if(l.useEffect(()=>{s(D(a)),(!t||t.id!==a)&&s(we(a))},[a,t,s]),l.useEffect(()=>{n==="idle"&&s(D(a))},[n,s,a]),i=="loading")return e.jsx("div",{className:"flex items-center h-96 justify-center",children:e.jsx(A,{className:""})});if(i=="failed")return e.jsx("div",{children:x});if(!t)return e.jsx("div",{children:e.jsx(A,{className:"m-auto"})});const c=r=>{const h=r[0],y=r[1];y==="approved"?s(Ce(h)):y==="rejected"&&s(Re(h))},g=r=>{console.log(r),s(Pe(r))},N=r=>{s(C({id:r,application:"closed"}))},ne=r=>{s(C({id:r,application:"open"}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"sm:w-full ",children:e.jsx(R,{className:"min-h-screen m-auto text-center",children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"m-auto sm:w-3/4 lg:w-3/4 lg:p-12 rounded-lg",children:[e.jsxs(R,{className:"m-2 p-4 md:p-2",children:[e.jsx("div",{className:"p-2 text-[#03C04A] ",children:e.jsx("p",{className:"md:text-xl text-center",children:t.title})}),e.jsx("div",{children:e.jsx("p",{className:"font-serif p-2 md:px-4 text-left m-auto lg:w-2/3",children:t.description})}),e.jsx("div",{children:e.jsx("p",{className:`font-serif italic dark:bg-slate-800 rounded-lg ring-1 ring-slate-900/5
                                                   shadow  p-2 md:px-4 text-left m-auto lg:w-2/3`,children:t.application==="open"?"Application Form is open":"Application Form is closed"})}),e.jsxs("div",{className:"lg:w-2/3 m-auto",children:[d||f?e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"Applicants "})}):e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"No applicants"})}),e.jsxs("div",{className:"flex flex-col",children:[f&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-yellow-400 p-2",children:"Pending requests"}),o.map((r,h)=>e.jsx("div",{className:"flex",children:r.status=="pending"&&r.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("div",{className:"flex",children:[e.jsx(w,{onClick:()=>g(r),to:`/user/${r.user.username}`,children:e.jsx(_,{className:"text-[#3a86ff] hover:text-[#0077b6] mx-2"})}),e.jsx("p",{className:"text-left w-24",children:r.user.name})]}),e.jsx("p",{className:" text-left",children:r.role}),e.jsx("p",{className:" text-yellow-500 text-left",children:r.status}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"m-0",children:e.jsx(v,{iconType:"check",message:"Are you sure you want to approve this applicant?",onConfirm:c,value:[r.id,"approved"]})}),e.jsx("div",{className:"m-0",children:e.jsx(v,{iconType:"x",message:`Are you sure you want to reject this applicant?
                                                                                     this will remove the applicant from the team permanently`,onConfirm:c,value:[r.id,"rejected"]})})]})]}),e.jsx(P,{className:"mb-2"})]})},h))]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"my-2 font-bold text-green-400",children:"Approved requests"}),o.map((r,h)=>e.jsx("div",{className:"flex",children:r.status=="approved"&&r.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsx(w,{to:`/user/${r.user.username}`,children:e.jsx(_,{className:"mx-2 text-[#3a86ff] hover:text-[#0077b6]"})}),e.jsx("p",{className:"text-left w-24",children:r.user.name})]}),e.jsx("p",{className:"text-left",children:r.role}),e.jsx("p",{className:"text-green-400 text-left",children:r.status}),e.jsx("div",{children:e.jsx(v,{iconType:"x",message:`Are you sure you want to remove this member from the team?
                                                                                     this will remove the member from the team permanently`,className:" mx-2 text-red-500 hover:text-red-700",onConfirm:c,value:[r.id,"rejected"]})})]}),e.jsx(P,{})]})},h))]})]})]})]}),e.jsx("div",{className:"m-2 p-4",children:t.application==="open"?e.jsx("div",{children:e.jsx(v,{iconType:"button",message:`Are you sure you want to close this project?
                                                 this will close the application form`,value:t.id,onConfirm:N})}):e.jsx("div",{children:e.jsx(T,{className:"bg-green-500 dark:bg-slate-800 dark:text-white",onClick:()=>ne(t.id),children:"Open Project"})})})]})})})})})};export{Ye as default};
