import{r as i,j as e,g,m as w,u as C,a as r,o as m,p as y,$ as P,X as h,B as A,a5 as S,a6 as k}from"./index-0zr3ocIV.js";import{C as u}from"./card-C6hSN6S5.js";import{S as f}from"./separator-gfDFbWZx.js";const q="w-16 h-16 border-4 border-t-4 border-gray-200 border-t-gray-600 rounded-full animate-spin",v=i.forwardRef((a,t)=>{const{className:l,...c}=a;return e.jsx("div",{ref:t,className:g(q,l),...c})});v.displayName="LoadingSpinner";const z=()=>{const{id:a}=w(),t=C();r(s=>s.user.loggeduser);const l=r(s=>s.projects.currentProject),c=r(s=>s.team.team),o=r(s=>s.team.team_status);r(s=>s.team.team_error),r(s=>s.projects.creator);const x=r(s=>s.projects.status),N=r(s=>s.projects.error),p=c.some(s=>s.status=="pending"&&s.role!=="Owner"),j=c.some(s=>s.status=="approved"&&s.role!=="Owner");if(i.useEffect(()=>{t(m(a)),(!l||l.id!==a)&&(console.log("heyy"),t(y(a)))},[a,l,t]),i.useEffect(()=>{o==="idle"&&t(m(a))},[o,t,a]),x=="loading")return e.jsx("div",{children:"Loading..."});if(x=="failed")return e.jsx("div",{children:N});if(!l)return e.jsx("div",{children:e.jsx(v,{className:"m-auto"})});const d=(s,n)=>{n==="approved"?t(S(s)):n==="rejected"&&t(k(s))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"sm:w-full ",children:e.jsx(u,{className:"min-h-screen m-auto text-center",children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"m-auto sm:w-3/4 lg:w-3/4 lg:p-12 rounded-lg",children:[e.jsxs(u,{className:"m-2 p-4 md:p-2",children:[e.jsx("div",{className:"p-2 text-[#03C04A] ",children:e.jsx("p",{className:"md:text-xl text-center",children:l.title})}),e.jsx("div",{children:e.jsx("p",{className:"font-serif p-2 md:px-4 text-left m-auto lg:w-2/3",children:l.description})}),e.jsxs("div",{className:"lg:w-2/3 m-auto",children:[j||p?e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"Applicants "})}):e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"No applicants"})}),e.jsxs("div",{className:"flex flex-col",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-yellow-400 p-2",children:"Pending requests"}),c.map((s,n)=>e.jsx("div",{className:"flex",children:s.status=="pending"&&s.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex m-2",children:[e.jsx("p",{className:" w-full text-left",children:s.user.name}),e.jsx("p",{className:" w-full text-left",children:s.role}),e.jsx("p",{className:" text-yellow-500 w-full text-left",children:s.status}),e.jsx("div",{className:"",children:e.jsx("span",{value:[s.id,"approved"],onClick:d,children:e.jsx(P,{size:24,className:"mx-2 text-green-400 hover:text-green-700",onClick:()=>d(s.id,"approved")})})}),e.jsx("div",{children:e.jsx(h,{size:24,className:" mx-2 text-red-500 hover:text-red-700",onClick:()=>d(s.id,"rejected")})})]}),e.jsx(f,{})]})},n))]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2 font-bold text-green-400",children:"Approved requests"}),c.map((s,n)=>e.jsx("div",{className:"flex",children:s.status=="approved"&&s.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex m-2",children:[e.jsx("p",{className:" w-full text-left",children:s.user.name}),e.jsx("p",{className:" w-full text-left",children:s.role}),e.jsx("p",{className:" text-green-400 w-full text-left",children:s.status}),e.jsx("div",{children:e.jsx(h,{size:24,className:" mx-2 text-red-500 hover:text-red-700",onClick:()=>d(s.id,"rejected")})})]}),e.jsx(f,{})]})},n))]})]})]})]}),e.jsx("div",{className:"m-2 p-4",children:e.jsx("div",{children:e.jsx(A,{variant:"destructive",children:"Close Project"})})})]})})})})})};export{z as default};
