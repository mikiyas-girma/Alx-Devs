import{c as n,r as o,j as e,O as M,g as d,C as R,h as X,X as $,T as S,D as P,i as Z,R as J,k as K,u as z,a as T,I as u,B as j,l as E,d as k,e as I,L as b}from"./index-DAXjKe-k.js";import{C as Q,a as V,d as W}from"./card-NGvnU_dD.js";import{L as c}from"./label-BG_axwLe.js";import{T as Y}from"./textarea-CfhPfP95.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=n("BadgeInfo",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"16",y2:"12",key:"1y1yb1"}],["line",{x1:"12",x2:"12.01",y1:"8",y2:"8",key:"110wyk"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=n("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=n("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=n("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=n("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=n("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=n("SquareUserRound",[["path",{d:"M18 21a6 6 0 0 0-12 0",key:"kaz2du"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ie=J,re=K,ce=Z,L=o.forwardRef(({className:s,...a},l)=>e.jsx(M,{ref:l,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));L.displayName=M.displayName;const A=o.forwardRef(({className:s,children:a,...l},m)=>e.jsxs(ce,{children:[e.jsx(L,{}),e.jsxs(R,{ref:m,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[a,e.jsxs(X,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));A.displayName=R.displayName;const U=({className:s,...a})=>e.jsx("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});U.displayName="DialogHeader";const _=({className:s,...a})=>e.jsx("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});_.displayName="DialogFooter";const O=o.forwardRef(({className:s,...a},l)=>e.jsx(S,{ref:l,className:d("text-lg font-semibold leading-none tracking-tight",s),...a}));O.displayName=S.displayName;const q=o.forwardRef(({className:s,...a},l)=>e.jsx(P,{ref:l,className:d("text-sm text-muted-foreground",s),...a}));q.displayName=P.displayName;function de(){const s=z(),a=T(t=>t.user.loggeduser),[l,m]=o.useState(a.bio||""),[p,f]=o.useState(a.name||""),[i,g]=o.useState(a.username||""),[h,r]=o.useState(a.email||""),[y,N]=o.useState(a.phone||""),[x,B]=o.useState(a.github||""),[w,C]=o.useState(""),[G,D]=o.useState(!1),H=async t=>{t.preventDefault();try{const v=E("csrf_access_token"),F=await k.patch(`/users/${a.id}`,{bio:l,name:p,username:i,email:h,phone:y,github:x},{headers:{"X-CSRF-Token":v}});console.log("Update successful",F.data),s(I(F.data)),C(""),D(!1)}catch(v){C(v.response.data.error)}};return e.jsxs(ie,{open:G,onOpenChange:D,children:[e.jsx(re,{asChild:!0,children:e.jsx(le,{className:"text-center w-full text-[#E72F2F]"})}),e.jsx(A,{className:"sm:max-w-[425px] md:max-w-[600px]",children:e.jsxs("form",{onSubmit:H,children:[e.jsxs(U,{children:[e.jsx(O,{children:"Edit profile"}),e.jsx(q,{children:"Make changes to your profile here. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"w-full grid grid-cols-4 justify-left items-center gap-4",children:[e.jsx(c,{htmlFor:"about",className:"text-right",children:"About"}),e.jsx(Y,{id:"about",className:"col-span-3 w-full h-22 resize-none",placeholder:"Add More Info about you so that other users know you better",value:l,onChange:t=>m(t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-4 justify-start items-start gap-4",children:[e.jsx(c,{htmlFor:"name",className:"text-right",children:"Name"}),e.jsx(u,{id:"name",value:p,onChange:t=>f(t.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"username",className:"text-right",children:"Username"}),e.jsx(u,{id:"username",value:i,onChange:t=>g(t.target.value),className:"col-span-3"})]}),w&&e.jsx("p",{className:"text-center text-red-500",children:w}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(u,{id:"email",value:h,onChange:t=>r(t.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(u,{id:"phone",value:y,onChange:t=>N(t.target.value),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"github",className:"text-right",children:"Github profile"}),e.jsx(u,{id:"github",value:x,onChange:t=>B(t.target.value),className:"col-span-3"})]})]}),e.jsx(_,{children:e.jsx(j,{type:"submit",children:"Save changes"})})]})})]})}const pe=()=>{const s=z(),a=T(i=>i.user.loggeduser),l=o.useRef(null),m=()=>{l.current.click()},p=async i=>{const g=i.target.files[0];if(!g)return;const h=new FormData;h.append("image",g);try{const r=E("csrf_access_token"),N=(await k.post("/upload_image",h,{headers:{"Content-Type":"multipart/form-data","X-CSRF-Token":r}})).data.img_url,x=await k.patch(`/users/${user.id}`,{image:N},{headers:{"X-CSRF-Token":r}});console.log("Update successful",x.data),s(I(x.data))}catch(r){console.error("Update failed",r.response.data)}};let f="";return a&&a.image&&(f=a==null?void 0:a.image.split("/")[2]),e.jsx(e.Fragment,{children:e.jsxs(Q,{className:`container mt-4 min-h-full flex flex-col justify-around px-4
                         sm:w-96 md:flex-row md:w-full lg:w-3/4`,children:[e.jsx("div",{className:"w-1/2 order-2 md:m-4 flex items-center",children:e.jsxs("div",{className:"text-left",children:[e.jsx(j,{className:"m-2 w-full",variant:"outline",asChild:!0,children:e.jsx(b,{to:"../my_projects",children:"My Projects"})}),e.jsx("br",{}),e.jsx(j,{className:"m-2 w-full",variant:"outline",asChild:!0,children:e.jsx(b,{children:"My Teams"})}),e.jsx("br",{}),e.jsx(j,{className:"m-2 w-full",variant:"outline",asChild:!0,children:e.jsx(b,{to:"/my_requests",children:"My Requests"})})]})}),e.jsxs("div",{className:"w-full md:order-2",children:[e.jsxs(V,{children:[a!=null&&a.image?e.jsx("div",{className:" flex justify-center items-center",children:e.jsx("img",{className:"w-32 h-32 rounded-full",src:f,alt:""})}):e.jsx("div",{className:" flex justify-center items-center",children:e.jsx(ne,{size:64,color:"#E0A75E"})}),e.jsxs("form",{children:[e.jsx("input",{type:"file",ref:l,onChange:p,className:"hidden",accept:"image/*"}),e.jsx(ae,{size:24,className:"text-center m-auto",color:"#E72F2F",onClick:m})]})]}),e.jsx("div",{className:"mx-10 flex justify-center",children:e.jsxs("div",{children:[a.bio?a.bio:e.jsx("div",{children:e.jsx("span",{className:"text-[#E0A75E]",children:"Add More Info about you so that other users  know you better"})}),e.jsx(de,{})]})}),e.jsxs(W,{className:"m-auto text-left m-4 p-4 border",children:[e.jsxs("div",{className:"flex border",children:[e.jsx(ee,{color:"#008000",className:"my-auto ml-2"}),e.jsxs("p",{className:"p-2",children:["Name: ",a==null?void 0:a.name]})]}),e.jsxs("div",{className:"flex border",children:[e.jsx(te,{color:"#008000",className:"my-auto ml-2"}),e.jsxs("p",{className:"p-2",children:["email: ",a==null?void 0:a.email]})]}),a.phone?e.jsxs("div",{className:"flex border",children:[e.jsx(oe,{color:"#008000",className:"my-auto ml-2"}),e.jsxs("p",{className:"p-2",children:["Phone: ",a==null?void 0:a.phone]})]}):"",a.github?e.jsxs("div",{className:"flex border",children:[e.jsx(se,{color:"#008000",className:"my-auto ml-2"}),e.jsxs("p",{className:"p-2",children:["Github: ",a==null?void 0:a.github]})]}):""]})]})]})})};export{pe as default};
