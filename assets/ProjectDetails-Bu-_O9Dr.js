import{r as l,j as e,g as p,x as oe,a5 as P,k as le,O as ne,z as _,a6 as ie,C as ce,F as de,a7 as pe,T as me,D as xe,h as S,i as ue,R as fe,a8 as b,$ as ge,X as he,B as O,m as je,u as ve,a as u,o as y,p as Ne,a9 as Ae,aa as De,ab as w}from"./index-DdLcicZA.js";import{C}from"./card-ipZN6qpC.js";import{S as R}from"./separator-Den8Tv2e.js";const ye="w-16 h-16 border-4 border-t-4 border-gray-200 border-t-gray-600 rounded-full animate-spin",A=l.forwardRef((s,a)=>{const{className:t,...o}=s;return e.jsx("div",{ref:a,className:p(ye,t),...o})});A.displayName="LoadingSpinner";var E="AlertDialog",[we,qe]=oe(E,[P]),m=P(),T=s=>{const{__scopeAlertDialog:a,...t}=s,o=m(a);return e.jsx(fe,{...o,...t,modal:!0})};T.displayName=E;var Ce="AlertDialogTrigger",k=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,n=m(t);return e.jsx(le,{...n,...o,ref:a})});k.displayName=Ce;var Re="AlertDialogPortal",$=s=>{const{__scopeAlertDialog:a,...t}=s,o=m(a);return e.jsx(ue,{...o,...t})};$.displayName=Re;var Pe="AlertDialogOverlay",F=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,n=m(t);return e.jsx(ne,{...n,...o,ref:a})});F.displayName=Pe;var j="AlertDialogContent",[_e,Se]=we(j),I=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,children:o,...n}=s,i=m(t),x=l.useRef(null),f=_(a,x),d=l.useRef(null);return e.jsx(ie,{contentName:j,titleName:M,docsSlug:"alert-dialog",children:e.jsx(_e,{scope:t,cancelRef:d,children:e.jsxs(ce,{role:"alertdialog",...i,...n,ref:f,onOpenAutoFocus:de(n.onOpenAutoFocus,c=>{var g;c.preventDefault(),(g=d.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(pe,{children:o}),e.jsx(Oe,{contentRef:x})]})})})});I.displayName=j;var M="AlertDialogTitle",z=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,n=m(t);return e.jsx(me,{...n,...o,ref:a})});z.displayName=M;var L="AlertDialogDescription",q=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,n=m(t);return e.jsx(xe,{...n,...o,ref:a})});q.displayName=L;var be="AlertDialogAction",V=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,n=m(t);return e.jsx(S,{...n,...o,ref:a})});V.displayName=be;var B="AlertDialogCancel",G=l.forwardRef((s,a)=>{const{__scopeAlertDialog:t,...o}=s,{cancelRef:n}=Se(B,t),i=m(t),x=_(a,n);return e.jsx(S,{...i,...o,ref:x})});G.displayName=B;var Oe=({contentRef:s})=>{const a=`\`${j}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${j}\` by passing a \`${L}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${j}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var o;document.getElementById((o=s.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},Ee=T,Te=k,ke=$,H=F,W=I,Y=V,X=G,J=z,K=q;const $e=Ee,Fe=Te,Ie=ke,Q=l.forwardRef(({className:s,...a},t)=>e.jsx(H,{className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));Q.displayName=H.displayName;const U=l.forwardRef(({className:s,...a},t)=>e.jsxs(Ie,{children:[e.jsx(Q,{}),e.jsx(W,{ref:t,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));U.displayName=W.displayName;const Z=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",s),...a});Z.displayName="AlertDialogHeader";const ee=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});ee.displayName="AlertDialogFooter";const ae=l.forwardRef(({className:s,...a},t)=>e.jsx(J,{ref:t,className:p("text-lg font-semibold",s),...a}));ae.displayName=J.displayName;const se=l.forwardRef(({className:s,...a},t)=>e.jsx(K,{ref:t,className:p("text-sm text-muted-foreground",s),...a}));se.displayName=K.displayName;const te=l.forwardRef(({className:s,...a},t)=>e.jsx(Y,{ref:t,className:p(b(),s),...a}));te.displayName=Y.displayName;const re=l.forwardRef(({className:s,...a},t)=>e.jsx(X,{ref:t,className:p(b({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));re.displayName=X.displayName;const v=({iconType:s,message:a,value:t,onConfirm:o})=>{const[n,i]=l.useState(!1),[x,f]=l.useState(null),d=N=>{f(N),i(!0)},c=()=>{o(x),i(!1)},g=()=>{i(!1)};return e.jsxs(e.Fragment,{children:[s==="check"?e.jsx(ge,{size:24,className:"cursor-pointer mx-2 text-green-500 hover:text-green-700",onClick:()=>d(t)}):s==="x"?e.jsx(he,{size:24,className:"cursor-pointer mx-2 text-red-500 hover:text-red-700",onClick:()=>d(t)}):s==="button"?e.jsx(O,{variant:"destructive",onClick:()=>d(t),children:"Close Project"}):null,e.jsxs($e,{open:n,onOpenChange:i,children:[e.jsx(Fe,{}),e.jsxs(U,{children:[e.jsx(Z,{children:e.jsx(ae,{children:"Confirmation"})}),e.jsx(se,{children:a}),e.jsxs(ee,{children:[e.jsx(re,{onClick:g,children:"Cancel"}),e.jsx(te,{onClick:c,children:"Confirm"})]})]})]})]})},Ve=()=>{const{id:s}=je(),a=ve();u(r=>r.user.loggeduser);const t=u(r=>r.projects.currentProject),o=u(r=>r.team.team),n=u(r=>r.team.team_status);u(r=>r.team.team_error),u(r=>r.projects.creator);const i=u(r=>r.projects.status),x=u(r=>r.projects.error),f=o.some(r=>r.status=="pending"&&r.role!=="Owner"),d=o.some(r=>r.status=="approved"&&r.role!=="Owner");if(l.useEffect(()=>{a(y(s)),(!t||t.id!==s)&&a(Ne(s))},[s,t,a]),l.useEffect(()=>{n==="idle"&&a(y(s))},[n,a,s]),i=="loading")return e.jsx("div",{className:"flex items-center h-96 justify-center",children:e.jsx(A,{className:""})});if(i=="failed")return e.jsx("div",{children:x});if(!t)return e.jsx("div",{children:e.jsx(A,{className:"m-auto"})});const c=r=>{const h=r[0],D=r[1];D==="approved"?a(Ae(h)):D==="rejected"&&a(De(h))},g=r=>{a(w({id:r,application:"closed"}))},N=r=>{a(w({id:r,application:"open"}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"sm:w-full ",children:e.jsx(C,{className:"min-h-screen m-auto text-center",children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"m-auto sm:w-3/4 lg:w-3/4 lg:p-12 rounded-lg",children:[e.jsxs(C,{className:"m-2 p-4 md:p-2",children:[e.jsx("div",{className:"p-2 text-[#03C04A] ",children:e.jsx("p",{className:"md:text-xl text-center",children:t.title})}),e.jsx("div",{children:e.jsx("p",{className:"font-serif p-2 md:px-4 text-left m-auto lg:w-2/3",children:t.description})}),e.jsx("div",{children:e.jsx("p",{className:`font-serif italic dark:bg-slate-800 rounded-lg ring-1 ring-slate-900/5
                                                   shadow  p-2 md:px-4 text-left m-auto lg:w-2/3`,children:t.application==="open"?"Application Form is open":"Application Form is closed"})}),e.jsxs("div",{className:"lg:w-2/3 m-auto",children:[d||f?e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"Applicants "})}):e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"No applicants"})}),e.jsxs("div",{className:"flex flex-col",children:[f&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-yellow-400 p-2",children:"Pending requests"}),o.map((r,h)=>e.jsx("div",{className:"flex",children:r.status=="pending"&&r.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:" w-full text-left",children:r.user.name}),e.jsx("p",{className:" w-full text-left",children:r.role}),e.jsx("p",{className:" text-yellow-500 w-full text-left",children:r.status}),e.jsx("div",{className:"m-0",children:e.jsx(v,{iconType:"check",message:"Are you sure you want to approve this applicant?",onConfirm:c,value:[r.id,"approved"]})}),e.jsx("div",{className:"m-0",children:e.jsx(v,{iconType:"x",message:`Are you sure you want to reject this applicant?
                                                                                     this will remove the applicant from the team permanently`,onConfirm:c,value:[r.id,"rejected"]})})]}),e.jsx(R,{className:"mb-2"})]})},h))]}),d&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mt-2 font-bold text-green-400",children:"Approved requests"}),o.map((r,h)=>e.jsx("div",{className:"flex",children:r.status=="approved"&&r.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex m-2",children:[e.jsx("p",{className:" w-full text-left",children:r.user.name}),e.jsx("p",{className:" w-full text-left",children:r.role}),e.jsx("p",{className:" text-green-400 w-full text-left",children:r.status}),e.jsx("div",{children:e.jsx(v,{iconType:"x",message:`Are you sure you want to remove this member from the team?
                                                                                     this will remove the member from the team permanently`,className:" mx-2 text-red-500 hover:text-red-700",onConfirm:c,value:[r.id,"rejected"]})})]}),e.jsx(R,{})]})},h))]})]})]})]}),e.jsx("div",{className:"m-2 p-4",children:t.application==="open"?e.jsx("div",{children:e.jsx(v,{iconType:"button",message:`Are you sure you want to close this project?
                                                 this will close the application form`,value:t.id,onConfirm:g})}):e.jsx("div",{children:e.jsx(O,{className:"bg-green-500 dark:bg-slate-800 dark:text-white",onClick:()=>N(t.id),children:"Open Project"})})})]})})})})})};export{Ve as default};
