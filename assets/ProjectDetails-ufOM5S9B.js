import{r as d,j as e,g as O,m as S,u as b,a as r,o as f,p as F,L as N,B as T,a6 as q,a7 as E,a8 as I,a9 as v}from"./index-DQBhgzFs.js";import{C as g}from"./card-CiOVKzlh.js";import{S as w}from"./separator-CyoRY71l.js";import{I as y,C as c}from"./ConfirmableIcon-B6M6fSd0.js";const L="w-16 h-16 border-4 border-t-4 border-gray-200 border-t-gray-600 rounded-full animate-spin",p=d.forwardRef((l,t)=>{const{className:a,...n}=l;return e.jsx("div",{ref:t,className:O(L,a),...n})});p.displayName="LoadingSpinner";const $=()=>{const{id:l}=S(),t=b();r(s=>s.user.loggeduser);const a=r(s=>s.projects.currentProject),n=r(s=>s.team.team),x=r(s=>s.team.team_status);r(s=>s.team.team_error),r(s=>s.projects.creator);const m=r(s=>s.projects.status),A=r(s=>s.projects.error),j=n.some(s=>s.status=="pending"&&s.role!=="Owner"),h=n.some(s=>s.status=="approved"&&s.role!=="Owner");if(d.useEffect(()=>{t(f(l)),(!a||a.id!==l)&&t(F(l))},[l,a,t]),d.useEffect(()=>{x==="idle"&&t(f(l))},[x,t,l]),m=="loading")return e.jsx("div",{className:"flex items-center h-96 justify-center",children:e.jsx(p,{className:""})});if(m=="failed")return e.jsx("div",{children:A});if(!a)return e.jsx("div",{children:e.jsx(p,{className:"m-auto"})});const o=s=>{const i=s[0],u=s[1];u==="approved"?t(q(i)):u==="rejected"&&t(E(i))},C=s=>{console.log(s),t(I(s))},P=s=>{t(v({id:s,application:"closed"}))},k=s=>{t(v({id:s,application:"open"}))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"sm:w-full ",children:e.jsx(g,{className:"min-h-screen m-auto text-center",children:e.jsx("div",{className:" ",children:e.jsxs("div",{className:"m-auto sm:w-3/4 lg:w-3/4 lg:p-12 rounded-lg",children:[e.jsxs(g,{className:"m-2 p-4 md:p-2",children:[e.jsx("div",{className:"p-2 text-[#03C04A] ",children:e.jsx("p",{className:"md:text-xl text-center",children:a.title})}),e.jsx("div",{children:e.jsx("p",{className:"font-serif p-2 md:px-4 text-left m-auto lg:w-2/3",children:a.description})}),e.jsx("div",{children:e.jsx("p",{className:`font-serif italic dark:bg-slate-800 rounded-lg ring-1 ring-slate-900/5
                                                   shadow  p-2 md:px-4 text-left m-auto lg:w-2/3`,children:a.application==="open"?"Application Form is open":"Application Form is closed"})}),e.jsxs("div",{className:"lg:w-2/3 m-auto",children:[h||j?e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"Applicants "})}):e.jsx("div",{className:"font-bold m-2",children:e.jsx("p",{className:"m-2",children:"No applicants"})}),e.jsxs("div",{className:"flex flex-col",children:[j&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-yellow-400 p-2",children:"Pending requests"}),n.map((s,i)=>e.jsx("div",{className:"flex",children:s.status=="pending"&&s.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("div",{className:"flex",children:[e.jsx(N,{onClick:()=>C(s),to:`/user/${s.user.username}`,children:e.jsx(y,{className:"text-[#3a86ff] hover:text-[#0077b6] mx-2"})}),e.jsx("p",{className:"text-left w-24",children:s.user.name})]}),e.jsx("p",{className:" text-left",children:s.role}),e.jsx("p",{className:" text-yellow-500 text-left",children:s.status}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"m-0",children:e.jsx(c,{iconType:"check",message:"Are you sure you want to approve this applicant?",onConfirm:o,value:[s.id,"approved"]})}),e.jsx("div",{className:"m-0",children:e.jsx(c,{iconType:"x",message:`Are you sure you want to reject this applicant?
                                                                                     this will remove the applicant from the team permanently`,onConfirm:o,value:[s.id,"rejected"]})})]})]}),e.jsx(w,{className:"mb-2"})]})},i))]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"my-2 font-bold text-green-400",children:"Approved requests"}),n.map((s,i)=>e.jsx("div",{className:"flex",children:s.status=="approved"&&s.role!=="Owner"&&e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsx(N,{to:`/user/${s.user.username}`,children:e.jsx(y,{className:"mx-2 text-[#3a86ff] hover:text-[#0077b6]"})}),e.jsx("p",{className:"text-left w-24",children:s.user.name})]}),e.jsx("p",{className:"text-left",children:s.role}),e.jsx("p",{className:"text-green-400 text-left",children:s.status}),e.jsx("div",{children:e.jsx(c,{iconType:"x",message:`Are you sure you want to remove this member from the team?
                                                                                     this will remove the member from the team permanently`,className:" mx-2 text-red-500 hover:text-red-700",onConfirm:o,value:[s.id,"rejected"]})})]}),e.jsx(w,{})]})},i))]})]})]})]}),e.jsx("div",{className:"m-2 p-4",children:a.application==="open"?e.jsx("div",{children:e.jsx(c,{iconType:"button",message:`Are you sure you want to close this project?
                                                 this will close the application form`,value:a.id,onConfirm:P})}):e.jsx("div",{children:e.jsx(T,{className:"bg-green-500 dark:bg-slate-800 dark:text-white",onClick:()=>k(a.id),children:"Open Project"})})})]})})})})})};export{$ as default};
