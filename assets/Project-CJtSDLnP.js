import{c as d,j as e,m as P,u as S,a as o,r as c,n as A,o as g,p as M,q as R,L as v,t as F}from"./index-BReQagXw.js";import{C as n,a as L,b as B,d as E,e as p}from"./card-KNTNKf5g.js";import"./separator-DZLhHLu1.js";/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=d("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=d("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=d("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=d("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),U=({team:a})=>e.jsxs(n,{className:"m-6",children:[e.jsx("p",{className:"text-green-600 font-bold text-center",children:"Team Members"}),e.jsx(n,{className:"mt-4",children:a.map(t=>e.jsx("div",{className:"p-4 border-b last:border-b-0",children:e.jsxs(n,{className:"grid grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(I,{className:"mr-2"}),e.jsxs("p",{children:["Name: ",t.user.name]})]}),e.jsxs("div",{align:"center",className:"mt-2",children:[e.jsx(T,{className:"mr-2"}),e.jsxs("p",{children:["Role: ",t.role]})]}),e.jsx("div",{align:"center",className:"mt-2",children:t.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 text-green-500"}),e.jsx("p",{children:"Status: Joined"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 text-yellow-500"}),e.jsx("p",{children:"Status: Pending"})]})})]})},t.user_id))})]}),D=()=>{const{id:a}=P(),t=S(),i=o(s=>s.user.loggeduser),r=o(s=>s.projects.currentProject),b=o(s=>s.team.team),x=o(s=>s.team.team_status);o(s=>s.team.team_error);const u=o(s=>s.projects.creator),j=o(s=>s.projects.status),N=o(s=>s.projects.error),[f,y]=c.useState({}),[m,k]=c.useState(""),{toast:h}=A();if(c.useEffect(()=>{t(g(a)),(!r||r.id!==a)&&t(M(a)),r&&r.creator_id&&(y(r.roles),t(R(r.creator_id)))},[a,r,t]),c.useEffect(()=>{x==="idle"&&t(g(a))},[x,t,a]),j=="loading")return e.jsx("div",{children:"Loading..."});if(j=="failed")return e.jsx("div",{children:N});if(!r)return e.jsx("div",{children:"Project not found"});const C=s=>{k(s.target.value)},w=()=>{if(!m){h({title:"Error",description:"Please select a role",status:"error",duration:2e3,variant:"destructive"});return}const s={project_id:a,role:m,status:"pending",user_id:i.id,user:i};console.log("new member: ",s),t(F(s)).then(l=>{l.type.endsWith("fulfilled")?h({title:"Success",description:"Application submitted successfully",status:"success",duration:2e3,variant:"success"}):l.type.endsWith("rejected")&&(console.log(l),h({title:"Error",description:"You ! already applied to this project",status:"error",duration:2e3,variant:"destructive"}))})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"m-4",children:[e.jsxs(n,{className:"flex flex-col md:flex-row min-h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(L,{className:"text-center",children:e.jsx(B,{children:r.title})}),e.jsxs(E,{className:"",children:[e.jsx("p",{className:"font-serif ",children:r.description}),e.jsx("p",{className:`font-serif italic dark:bg-slate-800 rounded-lg ring-1 ring-slate-900/5
                                                   shadow  p-2 md:px-4 text-left m-auto mt-2`,children:r.application==="open"?"Application Form is open":"Application Form is closed"})]}),e.jsxs("div",{className:"ml-6 p-2 ",children:[u&&e.jsxs("p",{children:["Project Creator: ",u.name]}),r.proposal&&e.jsxs("p",{className:"",children:["Proposal Link:",e.jsxs("a",{className:"text-blue-900",href:r.proposal,target:"_blank",rel:"noopener noreferrer",children:[e.jsx("span",{children:" "})," ",r.proposal]})]})]}),i.id!==r.creator_id&&r.application!=="closed"&&e.jsx("div",{children:e.jsxs("div",{className:"p-4 m-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Select a Role & Apply"}),e.jsx("div",{className:"flex flex-col",children:Object.keys(f).map(s=>e.jsx("div",{className:"mb-2",children:f[s].map((l,_)=>e.jsxs("label",{className:"inline-flex items-center mt-2",children:[e.jsx("input",{type:"radio",name:"role",value:l,checked:m===l,onChange:C,className:"form-radio"}),e.jsx("span",{className:"ml-2",children:l})]},_))},s))})]})}),i.id!==r.creator_id&&r.application!=="closed"?e.jsx(p,{className:"justify-center",children:e.jsx("div",{className:"p-[3px] relative",children:e.jsx("button",{className:` mt-2 bg-gradient-to-r from-green-400 via-green-500 to-green-500 
                                    hover:bg-gradient-to-r hover:from-blue-500 hover:via-blue-600 hover:to-blue-600 
                                    text-white font-semibold py-2 px-4 border border-gray-400 rounded-md shadow`,type:"submit",onClick:w,children:"Apply Here"})})}):i.id==r.creator_id?e.jsx(p,{className:"justify-center",children:e.jsx("div",{className:"p-[3px] relative",children:e.jsx(v,{to:`/project_details/${a}/`,children:e.jsx("button",{className:` mt-2 bg-gradient-to-r from-green-400 via-green-500 to-green-500 
                                    hover:bg-gradient-to-r hover:from-blue-500 hover:via-blue-600 hover:to-blue-600 
                                    text-white font-semibold py-2 px-4 border border-gray-400 rounded-md shadow`,type:"submit",children:"Manage Requests"})})})}):e.jsx(p,{className:"justify-center",children:e.jsx("div",{className:"p-[3px] relative",children:e.jsx("button",{className:` mt-2 bg-gradient-to-r from-red-400 via-red-500 to-red-500 
                                    hover:bg-gradient-to-r hover:from-blue-500 hover:via-blue-600 hover:to-blue-600 
                                    text-white font-semibold py-2 px-4 border border-gray-400 rounded-md shadow`,type:"submit",children:"Application Form Closed"})})})]}),e.jsx("div",{className:"flex-1 m-6 ",children:e.jsx(U,{team:b})})]}),e.jsx("div",{className:"text-center ",children:e.jsx(v,{to:"/home",children:e.jsx("button",{className:` mt-2 bg-gradient-to-r from-blue-400 via-blue-500 to-violet-500 
                                    hover:bg-gradient-to-r hover:from-blue-500 hover:via-blue-600 hover:to-blue-600 
                                    text-white font-semibold py-2 px-4 border border-gray-400 rounded-md shadow`,children:"See Another Projects"})})})]})})};export{D as default};
